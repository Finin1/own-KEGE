<!DOCTYPE html>
<html><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
        <meta charset="utf-8">
        <title>Режим имитации: Активация экзамена</title>
        <meta name="viewport" content="width=device-width">
               
    <link href="train_files/blank.css" rel="stylesheet">
    <link href="train_files/app.css" rel="stylesheet">
       
    <script async="" src="train_files/tag.js"></script>
    <script src="train_files/_references.js"></script>
    <script src="train_files/jquery-1.js"></script>
    <script src="train_files/jquery-ui-1.js"></script>
    <script src="train_files/jquery.js"></script>
    <script src="train_files/core.js"></script>

    </head>
<body>
    


<div class="wrapper">
    <h1 class="oneLine" id="title">Активация экзамена</h1>
    <div class="line"></div>
    <div class="forms">



        <h2>Бланк регистрации</h2>

        <div class="setElements">
            <input id="n1" class="oneNumb" maxlength="1" disabled="disabled" value="1" type="text">
            <input id="n2" class="numbs" maxlength="6" disabled="disabled" value="123123" type="text">
            <input id="n3" class="numbs" maxlength="6" disabled="disabled" value="123123" type="text">
            <button class="cbtn red advRed" id="change" onclick="ChangeNumber()">Изменить</button>
        </div>

        <h2>Номер КИМ</h2>
        <div class="setElements">
            <input id="kim1" class="oneNumb" maxlength="4" value="0250" disabled="disabled" type="text">
            <input id="kim2" class="numbs" maxlength="3" value="000" disabled="disabled" type="text">
            <input id="kim3" class="numbs" maxlength="3" value="001" disabled="disabled" type="text">
            <div class="popupBlock">
                <ul id="text"><li><div class="numb"><span>1</span></div><div class="text">Введите код активации, сообщенный организатором в аудитории.</div></li><li><div class="numb"><span>2</span></div><div class="text">Нажмите "Начать экзамен", после объявления о начале экзамена в аудитории.</div></li></ul>
            </div>
        </div>


        <div class="page_bottom_footer" id="approve" style="display: none;">
            <div class="setBottomElements">
                <button class="cbtn green advGreen" onclick="ToNextStep()">Данные корректны</button>
            </div>
            <div class="notice" id="notice" style="width: auto; font-size: 16px; display: none;">
                <div>
                    <strong>Внимание!</strong> <br>
                    В режиме имитации подтвердите корректность данных самостоятельно, нажав кнопку «Данные корректны».
                </div>
            </div>

        </div>

        <h2 class="beginExam" id="beginExam" style="display: flex;">Экзамен начнется после нажатия кнопки "Начать экзамен"</h2>

        <div class="setBottomElements" id="startExam" style="display: flex;">
            <div class="notice" style="width: auto; display: block; font-size: 16px"> 
                <div>
                    Код активации сообщает организатор в аудитории.<br>
                    В режиме имитации введите 1597
                </div>
            </div>
            <div class="rightSide">
                <button class="forgotCode" onclick="ShowAlert('','Код активации сообщает организатор в аудитории. В режиме имитации введите 1597.')">Забыли код активации?</button>
                <input class="blue" placeholder="ВВЕДИТЕ КОД АКТИВАЦИИ ЭКЗАМЕНА" id="pass" type="password">
                <button class="cbtn blue" onclick="ToNextStep()">Начать экзамен</button>
            </div>
        </div>
    </div>
</div>

<div class="modal" id="popub">
    <div class="overlay"></div>
    <div class="modalBlock">
        <div class="heading" id="header"></div>
        <div class="text" id="ptext"></div>
        <button class="cbtn" onclick="HideAlert()">Ок</button>
    </div>
</div>


<script type="text/jscript">

var varId = 1;

function pad(num, size) {
  var s = "000000000" + num;
  return s.substr(s.length-size);
}

function getVarId() {
  var varId = 1;
  var paramStr = window.location.search.substring(1);
  var params = {};
  if( paramStr ) {
    paramStr.replace(
        new RegExp( "([^?=&]+)(=([^&]*))?", "g" ),
        function( $0, $1, $2, $3 ){ params[$1] = $3; }
        );    
    if( params['varId'] ) 
      varId = parseInt(params['varId']);
    }
  if( varId == 1 ) {
    var varIdSaved = localStorage.getItem('kim');
    if( varIdSaved  &&  varIdSaved != '' )
      varId = parseInt(varIdSaved) % 1000000; 
    }
  return varId;
}
    $(function () {
   
        var number = localStorage.getItem('number');
        if (number != '') {
            var n1 = document.getElementById("n1");
            var n2 = document.getElementById("n2");
            var n3 = document.getElementById("n3");
            n1.value = number.substring(0, 1);
            n2.value = number.substring(1, 7);
            n3.value = number.substring(7, 13);
        }

        varId = getVarId();
        number = pad( (250000000 + varId).toString(), 10 ); 
        if ( number != '') {
            var n1 = document.getElementById("kim1");
            var n2 = document.getElementById("kim2");
            var n3 = document.getElementById("kim3");
            n1.value = number.substring(0, 4);
            n2.value = number.substring(4, 7);
            n3.value = number.substring(7, 10);
        }
  
        var ignoreInstruction = localStorage.getItem('IgnoreInstruction');

        if (ignoreInstruction == '2') {
            document.getElementById("title").textContent = 'Активация экзамена';
            document.getElementById('notice').style.display = "none";
            document.getElementById('approve').style.display = "none";
            document.getElementById('beginExam').style.display = "flex";
            document.getElementById('startExam').style.display = "flex";
            document.getElementById('text').innerHTML = '<li><div class="numb"><span>1</span></div><div class="text">Введите код активации, сообщенный организатором в аудитории.</div></li><li><div class="numb"><span>2</span></div><div class="text">Нажмите "Начать экзамен", после объявления о начале экзамена в аудитории.</div></li>';
            document.title = 'Режим имитации: Активация экзамена';
        }
        else {
            localStorage.setItem('IgnoreInstruction', '1');
            document.getElementById("title").textContent = 'Регистрация участника'
            document.getElementById('notice').style.display = "block";
            document.getElementById('approve').style.display = "flex";
            document.getElementById('beginExam').style.display = "none";
            document.getElementById('startExam').style.display = "none";
            document.getElementById('text').innerHTML = '<li><div class="numb"><span>1</span></div><div class="text">Сверьте приведенный выше номер бланка регистрации с номером, указанном на Вашем бланке регистрации.</div></li ><li><div class="numb"><span>2</span></div><div class="text">Если Вы ошиблись при вводе номера бланка регистрации, нажмите "Изменить" справа от номера бланка.</div></li><li><div class="numb"><span>3</span></div><div class="text">Если введенный номер бланка регистрации верный, дождитесь организатора для подтверждения его корректности.</div></li>';
            document.title = 'Режим имитации: Регистрация участника';
        }
    });

    function ShowAlert(title, text) {
        if (title == '') {
            document.getElementById("header").style.display = 'none';
        }
        else {
            document.getElementById("header").style.display = 'block';
            document.getElementById("header").textContent = title;
        }
        document.getElementById("ptext").textContent = text;
        document.getElementById("popub").className = 'modal active';
    }

    function HideAlert() {
        document.getElementById("popub").className = 'modal';
    }

    function ToNextStep() {
  
        var ignoreInstruction = localStorage.getItem('IgnoreInstruction');
       
        if (ignoreInstruction == '2') {
            if (document.getElementById("pass").value == '1597') {
                localStorage.setItem('startTime', (new Date().getTime() / 1000).toFixed());
                rederict('train.htm?varId=' + (varId % 1000000));
            }
            else {
                document.getElementById("pass").value = '';
                ShowAlert('Внимание', 'Неверный код активации. Код активации сообщает организатор в аудитории. В режиме имитации введите 1597');
            }
        }
        else {
            localStorage.setItem('IgnoreInstruction','2');
            rederict('activate.htm')
        }
    }

    function ChangeNumber() {


        rederict('blank.htm');
    }
  
</script>
<script src="train_files/app.js"></script>

	
<iframe name="ym-native-frame" title="ym-native-frame" style="opacity: 0 ! important; width: 0px ! important; height: 0px ! important; position: absolute ! important; left: 100% ! important; bottom: 100% ! important; border: 0px none ! important;" aria-hidden="true" frameborder="0"></iframe></body></html>