<!DOCTYPE html>
<html>
	<head>
		<link rel="stylesheet" href="../static/style.css">
		<meta charset="UTF-8">
		<title>KEGE</title>
	</head>
	<body>
		<form method="post"  action="/finish/">
			<header>
				<input class="menu-btn" id="send-work-btn" type="submit" value="Отправить работу">
				<span id="timer">4:00</span>
				<span id="title">ЕГЭ по ОБЖ #12415353</span>
			</header>
			<div id="workspace">

				<div id="task-select" class="scrollbar">
					{% for task in tasks %}
						<label class="task-num-lbl">
							<input class="hidden" name="task-num-rdb" type="radio" onChange="task{{task.num}}rdb.checked=true;get_task_by_num({{task.num}})">
							<div>{{task.num}}</div>
						</label>
					{% endfor %}

				</div>
				<div id="task-screen">
					<div id="greeting">
						<br>

						НЕ СПАТЬ СОЛДАТ !<br>
						ВРЕМЯ ПОШЛО !
					</div>
					{% for task in tasks %}

					<input type="radio" id="task{{task.num}}rdb" name="task" class="task-rdb hidden">
					<div class="task" id="task{{task.num}}" >
						<div class="info scrollbar" id="task{{task.num}}inf">

						</div>
						<div class="answer">
							<div class="answer-container">
								<b>№{{task.num}} Ответ:</b><br>
								<input name="answer{{task.num}}" id="answer{{task.num}}"><br>
								<div onclick="localStorage.setItem({{task.num}},answer{{task.num}}.value)" >Сохранить ответ</div>
							</div>
						</div>
					</div>
					{% endfor %}

				</div>
			</div>

		</form>
	<script>
		function get_task_by_num(n)	{
			var xmlHttp = new XMLHttpRequest();
			xmlHttp.onload = function(){
			console.log('!')
			//console.log(JSON.parse(xmlHttp.responseText))
				document.getElementById('task'+n+'inf').innerHTML = xmlHttp.responseText//JSON.parse(xmlHttp.responseText).content;
			}
			xmlHttp.open( "GET", '/task/'+n, true );
			xmlHttp.send(null);

		}

		{% for task in tasks %}
		console.log('#')
		answer{{task.num}}.value = localStorage.getItem({{task.num}})
		{%endfor%}

	</script>
	</body>

</html>
